<!DOCTYPE html>
<html lang = 'en'>

<head>
    <title>Novy test</title>

    <meta charset = 'utf-8'>
    <meta http-equiv = 'X-UA-Compatible' content = 'IE = edge'>
    <meta name = 'viewport' content = 'width = device-width, initial-scale = 1'>


    <!-- Bootstrap Core CSS -->
    <link rel='stylesheet' href='css/bootstrap.min.css' type='text/css'>

    <!-- Custom Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' href='font-awesome/css/font-awesome.min.css' type='text/css'>

    <!-- Plugin CSS -->
    <link rel='stylesheet' href='css/animate.min.css' type='text/css'>

    <!-- Custom CSS -->
    <link rel='stylesheet' href='css/creative.css' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->

    <!--[if lt IE 9]>
    <![endif]-->
    <!-- jQuery -->
    <script src='js/jquery.js'></script>

    <!-- Bootstrap Core JavaScript -->
    <script src='js/bootstrap.min.js'></script>

    <!-- Plugin JavaScript -->
    <script src='js/jquery.easing.min.js'></script>
    <script src='js/jquery.fittext.js'></script>
    <script src='js/wow.min.js'></script>

    <script src='js/bootbox.min.js'></script>

    <!-- Custom Theme JavaScript -->
    <script src='js/creative.js'></script>

    <script>
        function test() {
            bootbox.confirm('Are you sure you want to end your test?', function(result) {
                if (result) {
                    window.scrollTo(0, 0);
                    $('#submitBtn').hide();
                    full = 50;
                    limit = 50;
                    total = 0;
                    total += testSingleChoice('#question1');
                    total += testMultipleChoice('#question2');
                    total += testFreeAnswer('#question3');
                    total += testPairingAnswer('#question4');

                    $('input').each(function (index, value) {
                        $(value).attr('disabled', true);
                    });
                    $('select').each(function (index, value) {
                        $(value).attr('disabled', true);
                    });

                    $('#information-info').hide();
                    if (total >= limit) {
                        $('#success-points').text(total + '/' + full);
                        $('#success-info').fadeIn();
                    } else {
                        $('#failure-points').text(total + '/' + full);
                        $('#failure-info').fadeIn();
                    }
                }
            });
        }

        function testMultipleChoice(id) {
            selected = $(id);
            possiblePoints = parseFloat($(selected).attr('points'));

            allCorrect = selectedCorrect = 0;

            selectedIncorrect = false;

            $('input', selected).each(function (index, value) {
                toBeSelected = $.parseJSON($(value).attr('correct'));
                checked = $(value).is(':checked');
                if (toBeSelected) {
                    allCorrect += 1; // increment all
                    if (checked) {
                        $(value).parent().parent().addClass('has-success');
                        selectedCorrect+= 1; // increment points
                    }
                } else {
                    if (checked) {
                        $(value).parent().parent().addClass('has-error');
                        selectedIncorrect = true;
                    }
                }
            });

            points = 0;
            if (!selectedIncorrect) {
                points = (selectedCorrect * possiblePoints) / allCorrect;
                points = (Math.round(points * 100) / 100);
            }
            $('.points', selected).text(points + '/' + possiblePoints);
            return points;
        }

        function testSingleChoice(id) {
            selected = $(id);
            possiblePoints = parseFloat($(selected).attr('points'));

            selectedCorrect = false;

            $('input', selected).each(function (index, value) {
                if ($(value).is(':checked')) {
                    if ($.parseJSON($(value).attr('correct'))) {
                        $(value).parent().parent().addClass('has-success');
                        selectedCorrect = true;
                    } else {
                        $(value).parent().parent().addClass('has-error');
                        selectedCorrect = false;
                    }
                }
            });

            points = selectedCorrect ? possiblePoints : 0;
            points = (Math.round(points * 100) / 100);

            $('.points', selected).text(points + '/' + possiblePoints);

            return points;
        }

        function testFreeAnswer(id) {
            selected = $(id);
            possiblePoints = parseFloat($(selected).attr('points'));

            correctAnswer = $('input', selected).attr('correctAnswer');
            answer = $('input', selected).val();
            caseSensitive = $.parseJSON($('input', selected).attr('caseSensitive'));

            if (!caseSensitive) {
                answer = answer.toLocaleUpperCase();
                correctAnswer = correctAnswer.toLocaleUpperCase();
            }

            $('input', selected).parent().addClass((correctAnswer == answer) ? 'has-success' : 'has-error');

            points = (correctAnswer == answer) ? possiblePoints : 0;
            points = (Math.round(points * 100) / 100);
            $('.points', selected).text(points + '/' + possiblePoints);

            return points;
        }

        function testPairingAnswer(id) {
            selected = $(id);
            possiblePoints = parseFloat($(selected).attr('points'));

            allQuestions = correctMatches= 0;

            $('select', selected).each(function (index, value) {
                allQuestions += 1;
                selectedValue = $(value).val();
                correctValue = $(value).attr('correct');
                if (selectedValue == correctValue) {
                    correctMatches += 1;
                    $(value).parent().addClass('has-success');
                } else {
                    $(value).parent().addClass('has-error');
                }
            });

            points = (correctMatches * possiblePoints) / allQuestions;
            points = (Math.round(points * 100) / 100);
            $('.points', selected).text(points + '/' + possiblePoints);

            return points;
        }
    </script>

    <style>
        .slimFont {
            min-height: 20px;
            padding-left: 20px;
            margin-bottom: 0;
            font-weight: 400;
            cursor: pointer;
        }
        .questionHeader {
            padding: 10px;
            margin-bottom: 5px;
            border: 1px solid transparent;
            border-radius: 4px;

            background-color: #e0ebf0;
            border-color: #c6cfe9;
        }
    </style>
</head>

<body>
<div class = 'container'>
    <h1 class='text-center'>Novy test</h1>

    <div class='alert alert-success collapse' id='success-info'>
        <strong>Congratulations!</strong> You have passed with <strong id='success-points'></strong> points.
    </div>

    <div class='alert alert-danger collapse' id='failure-info'>
        <strong>Failure!</strong> You have failed with <strong id='failure-points'></strong> points (passing limit was at least 50 points).
    </div>

    <div class='alert alert-warning' id='information-info'>
        <strong>Be careful!</strong> You will need <strong>50</strong> of total 50 points to pass the test.
    </div>

    <h2></h2>

        <div style='margin:25px 0 25px 0;'>
        <form class='form-horizontal questionHeader' role='form' id='question1' points='10'>
            <div class='form-group'>
                <label class='control-label col-sm-3'>Kto je Maros?</label>

                <div class='col-sm-8'>
                    <div class='radio'>
                        <label>
                            <input type='radio' name='question1optionsRadios' correct='true'>
                            Gej
                        </label>
                    </div>

                    <div class='radio'>
                        <label>
                            <input type='radio' name='question1optionsRadios' correct='false'>
                            Gejos
                        </label>
                    </div>

                    <div class='radio'>
                        <label>
                            <input type='radio' name='question1optionsRadios' correct='false'>
                            Puci
                        </label>
                    </div>

                    <div class='radio'>
                        <label>
                            <input type='radio' name='question1optionsRadios' correct='false'>
                            Dudok
                        </label>
                    </div>
                </div>

                <label class='control-label col-sm-1 points'>?/10</label>
            </div>
        </form>
    </div>
    <div style='margin:25px 0 25px 0;'>
        <form class='form-horizontal questionHeader' role='form' id='question2' points='8'>
            <div class='form-group'>
                <label class='control-label col-sm-3'>Kto je Mato?</label>

                <div class='col-sm-8'>
                    <div class='checkbox'>
                        <label>
                            <input type='checkbox' correct='true'> Jojo
                        </label>
                    </div>

                    <div class='checkbox'>
                        <label>
                            <input type='checkbox' correct='false'> Dudok
                        </label>
                    </div>

                    <div class='checkbox'>
                        <label>
                            <input type='checkbox' correct='true'> Pupek
                        </label>
                    </div>

                    <div class='checkbox'>
                        <label>
                            <input type='checkbox' correct='false'> Tucko
                        </label>
                    </div>
                </div>

                <label class='control-label col-sm-1 points'>?/8</label>
            </div>
        </form>
    </div>
    <div style='margin:25px 0 25px 0;'>
        <form class='form-horizontal questionHeader' role='form' id='question3' points='12'>
            <div class='form-group'>
                <label class='control-label col-sm-3'>Kto je Misko?</label>

                <div class='col-sm-8'>
                    <input type='text' class='form-control' correctAnswer='Jojo' caseSensitive='false'>
                </div>
                <label class='control-label col-sm-1 points'>?/12</label>
            </div>
        </form>
    </div>
    <div style='margin:25px 0 25px 0;'>
        <form class='form-horizontal questionHeader' role='form' id='question4' points='20'>
            <div class='form-group'>
                <label class='control-label col-sm-3'>Sparuj bratov podla iq</label>
                <label class='col-sm-offset-8 control-label col-sm-1 points'>?/20</label>
            </div>

                        <div class='form-group'>
                <label class='col-sm-offset-3 control-label col-sm-2 slimFont'>Milan</label>

                <div class='col-sm-6'>
                    <select class='form-control' correct='Milan'>
                        <option value='Milan'>Milan</option>
                        <option value='Michal'>Michal</option>
                        <option value='Matej'>Matej</option>
                        <option value='Maros'>Maros</option>
                    </select>
                </div>
            </div>

            <div class='form-group'>
                <label class='col-sm-offset-3 control-label col-sm-2 slimFont'>Michal</label>

                <div class='col-sm-6'>
                    <select class='form-control' correct='Michal'>
                        <option value='Milan'>Milan</option>
                        <option value='Michal'>Michal</option>
                        <option value='Matej'>Matej</option>
                        <option value='Maros'>Maros</option>
                    </select>
                </div>
            </div>

            <div class='form-group'>
                <label class='col-sm-offset-3 control-label col-sm-2 slimFont'>Matej</label>

                <div class='col-sm-6'>
                    <select class='form-control' correct='Matej'>
                        <option value='Milan'>Milan</option>
                        <option value='Michal'>Michal</option>
                        <option value='Matej'>Matej</option>
                        <option value='Maros'>Maros</option>
                    </select>
                </div>
            </div>

            <div class='form-group'>
                <label class='col-sm-offset-3 control-label col-sm-2 slimFont'>Maros</label>

                <div class='col-sm-6'>
                    <select class='form-control' correct='Maros'>
                        <option value='Milan'>Milan</option>
                        <option value='Michal'>Michal</option>
                        <option value='Matej'>Matej</option>
                        <option value='Maros'>Maros</option>
                    </select>
                </div>
            </div>

        </form>
    </div>

    <div style='margin:25px 0 25px 0;'>
        <form class='form-horizontal' role='form' points='10'>
            <div class='form-group'>
                <div class='col-sm-offset-5 col-sm-1'>
                    <button id='submitBtn' type='button' onclick='test()' class='btn btn-default'>Submit</button>
                </div>
            </div>
        </form>
    </div>
</div>
</body>
</html>